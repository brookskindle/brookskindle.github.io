
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Source+Sans+Pro:300,400,400i,700" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://brookskindle.github.io/theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="https://brookskindle.github.io/theme/pygments/dracula.min.css">
  <link rel="stylesheet" type="text/css" href="https://brookskindle.github.io/theme/font-awesome/css/font-awesome.min.css">

    <link href="https://brookskindle.github.io/styles/styles.css" rel="stylesheet">





    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#2e3047">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#2e3047">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Microsoft EDGE -->
    <meta name="msapplication-TileColor" content="#2e3047">

<meta name="author" content="Brooks Kindle" />
<meta name="description" content="Here&#39;s a hypothetical situation. Suppose you&#39;re starting a new project and you want to use the requests library. Installing requests also installs the libraries that it depends on. Should you be explicit and pin the versions of all installed libraries (equivalent to the output of pip freeze) certifi==2018.4 …" />
<meta name="keywords" content="python, pip">

<meta property="og:site_name" content="Brooks Kindle"/>
<meta property="og:title" content="Pin your versions. Or don&#39;t."/>
<meta property="og:description" content="Here&#39;s a hypothetical situation. Suppose you&#39;re starting a new project and you want to use the requests library. Installing requests also installs the libraries that it depends on. Should you be explicit and pin the versions of all installed libraries (equivalent to the output of pip freeze) certifi==2018.4 …"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://brookskindle.github.io/pin-your-versions-or-dont.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2018-06-25 00:00:00-07:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://brookskindle.github.io/author/brooks-kindle.html">
<meta property="article:section" content="programming"/>
<meta property="article:tag" content="python"/>
<meta property="article:tag" content="pip"/>
<meta property="og:image" content="/images/profile.jpg">

  <title>Brooks Kindle &ndash; Pin your versions. Or don&#39;t.</title>

</head>
<body>
  <aside>
    <div>
      <a href="https://brookskindle.github.io">
        <img src="/images/profile.jpg" alt="Brooks Kindle" title="Brooks Kindle">
      </a>
      <h1><a href="https://brookskindle.github.io">Brooks Kindle</a></h1>

<p>software engineer</p>
      <nav>
        <ul class="list">
          <li><a href="https://brookskindle.github.io/pages/about.html#about">About</a></li>
          <li><a href="https://brookskindle.github.io/pages/contact.html#contact">Contact</a></li>

        </ul>
      </nav>

      <ul class="social">
        <li><a class="sc-github" href="https://github.com/brookskindle" target="_blank"><i class="fa fa-github"></i></a></li>
        <li><a class="sc-linkedin" href="https://www.linkedin.com/in/brookskindle/" target="_blank"><i class="fa fa-linkedin"></i></a></li>
      </ul>
    </div>


  </aside>
  <main>

    <nav>
      <a href="https://brookskindle.github.io">    Home
</a>

      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>


    </nav>

<article class="single">
  <header>
      
    <h1 id="pin-your-versions-or-dont">Pin your versions. Or don't.</h1>
    <p>
          Posted on Mon 25 June 2018 in <a href="https://brookskindle.github.io/category/programming.html">programming</a>


    </p>
  </header>


  <div>
    <p>Here's a hypothetical situation. Suppose you're starting a new project and you
want to use the <code>requests</code> library. Installing <code>requests</code> also installs the
libraries that it depends on. Should you be explicit and pin the versions of
all installed libraries (equivalent to the output of <code>pip freeze</code>)</p>
<div class="highlight"><pre><span></span><span class="n">certifi</span><span class="o">==</span><span class="mi">2018</span><span class="p">.</span><span class="mi">4</span><span class="p">.</span><span class="mi">16</span>
<span class="n">chardet</span><span class="o">==</span><span class="mi">3</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">4</span>
<span class="n">idna</span><span class="o">==</span><span class="mi">2</span><span class="p">.</span><span class="mi">7</span>
<span class="n">requests</span><span class="o">==</span><span class="mi">2</span><span class="p">.</span><span class="mi">19</span><span class="p">.</span><span class="mi">1</span>
<span class="n">urllib3</span><span class="o">==</span><span class="mi">1</span><span class="p">.</span><span class="mi">23</span>
</pre></div>


<p>or should you just list the top-most dependencies by name, omitting versions
altogether?</p>
<div class="highlight"><pre><span></span><span class="n">requests</span>
</pre></div>


<p>The answer depends on if your project is an application or a library, because
needs differ from one type to the next.</p>
<h2>Applications</h2>
<p>An application is a complete system. Its purpose is to provide functionality to
the end-user. It is composed of multiple libraries and exists independent of
other applications. If it has to interact with other applications, that
communication happens via a well-defined API interface such as XML-RPC, SOAP,
or REST. API endpoints should be versioned so that developers who interact with
your application (or vice-versa) can be assurred that API behaviour is
well-defined and won't change unless the version changes. A good example of
this is <a href="https://developer.github.com/v3/?">GitHub's API</a> - they have good
documentation as well as a consistent versioning scheme that users can rely on.</p>
<p>As an application builder, library versions you use are just an implementation
detail because the end user will never need to know about it. From an
application deployment perspective, <strong>it is more important to be explicit about
which versions of libraries you need than it is to update libraries to the
latest version every time the application is deployed.</strong> This is as true in a
continuous deployment environment as it is in any other deployment environment.</p>
<blockquote>
<p>Caveat: just because a package version works doesn't mean it should never be
updated. As a best practice, applications that pin library versions should
have a plan for checking and updating outdated dependencies on a regular
basis.</p>
</blockquote>
<h2>Libraries</h2>
<p>Libraries, on the other hand, are not a complete system. They are meant to be
used in applications, and therefore must be as flexible as possible so as to
not introduce conflicts with other libraries being used. A python library that
requires <code>requests==2.19.1</code>, for example, cannot be used with another python
library that requires a different version (for eg: <code>requests==2.18.1</code>).
However, if two libraries only require that <code>requests</code> be installed, regardless
of the version, then they will have no problem being used together.</p>
<p>As the developer of a library, <strong>you should not pin the versions of libraries
you depend on unless absolutely necessary.</strong> If you depend on functionality of
a library that doesn't exist in some earlier versions, specify the earliest
version of that library as being the minimum required version (eg:
<code>requests&gt;="2.18"</code>).</p>
<blockquote>
<p>Caveat: new versions of libraries you depend on may cause incompatibilities
with your libraries. Since version pinning isn't recommended, responsiveness
is important when users bring up the issue of version incompatibilities.</p>
</blockquote>
<h2>Exceptions</h2>
<p>Obviously there are exceptions to every rule.</p>
<ul>
<li>The more platforms/environments your application has to run on (for example,
  <code>vim</code> has to be able to run on lots of platforms), the harder it will be to
  pin exact versions.</li>
<li>If you have an application that can also be used as a library, then the
  library part should be split out into its own project, and the application
  should depend on a specific version of the library.</li>
</ul>
<h2>tl;dr</h2>
<p>If you're building an application, pin specific versions for all the libraries
you depend on. If you're building a library, be as permissive as possible.</p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="https://brookskindle.github.io/tag/python.html">python</a>
      <a href="https://brookskindle.github.io/tag/pip.html">pip</a>
    </p>
  </div>





</article>

    <footer>
<p>&copy;  </p>
<p>    Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a>
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Brooks Kindle ",
  "url" : "https://brookskindle.github.io",
  "image": "/images/profile.jpg",
  "description": "None"
}
</script>

</body>
</html>